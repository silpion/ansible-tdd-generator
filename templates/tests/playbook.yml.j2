---
- hosts: all
  sudo: yes
  sudo_user: root
  vars:
    rspec_ansible_meta_dependencies_debian:
      - python-selinux
    rspec_ansible_meta_dependencies_redhat:
      - libselinux-python
  pre_tasks:
    - name: Install Ansible meta dependencies (ansible_os_family == 'Debian')
      when: ansible_os_family == 'Debian'
      with_items: rspec_ansible_meta_dependencies_debian
      apt:
        state=installed
        name={{ '{{' }} item {{ '}}' }}
    - name: Install Ansible meta dependencies (ansible_os_family == 'RedHat')
      when: ansible_os_family == 'RedHat'
      with_items: rspec_ansible_meta_dependencies_redhat
      yum:
        state=installed
        name={{ '{{' }} item {{ '}}' }}
  roles:
    - { role: ansible-{{ role_name }} }
